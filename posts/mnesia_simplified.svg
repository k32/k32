<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="557px" preserveAspectRatio="none" style="width:226px;height:557px;" version="1.1" viewBox="0 0 226 557" width="226px" zoomAndPan="magnify"><defs><filter height="300%" id="f15wypm43j5lfv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="23" x2="23" y1="41.0679" y2="514.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="159" x2="159" y1="41.0679" y2="514.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="195" x2="195" y1="41.0679" y2="514.2461"/><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="26" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="12" x="15" y="24.9659">tx</text><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="26" x="8" y="513.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="12" x="15" y="535.2121">tx</text><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="22" x="146" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="8" x="153" y="24.9659">a</text><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="22" x="146" y="513.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="8" x="153" y="535.2121">a</text><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="23" x="182" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="9" x="189" y="24.9659">b</text><rect fill="#FEFECE" filter="url(#f15wypm43j5lfv)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="23" x="182" y="513.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="9" x="189" y="535.2121">b</text><rect fill="#EEEEEE" filter="url(#f15wypm43j5lfv)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="211" x="3" y="72.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="214" y1="72.9209" y2="72.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="214" y1="75.9209" y2="75.9209"/><rect fill="#EEEEEE" filter="url(#f15wypm43j5lfv)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="121" x="48" y="61.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="54" y="78.9649">mnesia:write(K)</text><polygon fill="#A80036" points="147,116.4799,157,120.4799,147,124.4799,151,120.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="120.4799" y2="120.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="30" y="114.6709">get write lock(K)</text><polygon fill="#A80036" points="183.5,148.186,193.5,152.186,183.5,156.186,187.5,152.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="189.5" y1="152.186" y2="152.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="30" y="146.377">get write lock(K)</text><polygon fill="#A80036" points="34,179.892,24,183.892,34,187.892,30,183.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="194.5" y1="183.892" y2="183.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="178.083">ok</text><polygon fill="#A80036" points="34,211.598,24,215.598,34,219.598,30,215.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="158" y1="215.598" y2="215.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="209.789">ok</text><rect fill="#EEEEEE" filter="url(#f15wypm43j5lfv)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="211" x="3" y="245.451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="214" y1="245.451" y2="245.451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="214" y1="248.451" y2="248.451"/><rect fill="#EEEEEE" filter="url(#f15wypm43j5lfv)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="148" x="34.5" y="233.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="40.5" y="251.495">commit transaction</text><polygon fill="#A80036" points="147,289.01,157,293.01,147,297.01,151,293.01" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="293.01" y2="293.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="30" y="287.201">ask for commit(TX)</text><polygon fill="#A80036" points="183.5,320.716,193.5,324.716,183.5,328.716,187.5,324.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="189.5" y1="324.716" y2="324.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="30" y="318.907">ask for commit(TX)</text><polygon fill="#A80036" points="34,352.4221,24,356.4221,34,360.4221,30,356.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="194.5" y1="356.4221" y2="356.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="350.6131">ok</text><polygon fill="#A80036" points="34,384.1281,24,388.1281,34,392.1281,30,388.1281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="158" y1="388.1281" y2="388.1281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="382.3191">ok</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="65" y1="419.8341" y2="419.8341"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="65" x2="65" y1="419.8341" y2="432.8341"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="24" x2="65" y1="432.8341" y2="432.8341"/><polygon fill="#A80036" points="34,428.8341,24,432.8341,34,436.8341,30,432.8341" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="30" y="414.0251">commit</text><polygon fill="#A80036" points="147,460.5401,157,464.5401,147,468.5401,151,464.5401" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="464.5401" y2="464.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="458.7311">release locks</text><polygon fill="#A80036" points="183.5,492.2461,193.5,496.2461,183.5,500.2461,187.5,496.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="189.5" y1="496.2461" y2="496.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="490.4371">release locks</text><!--MD5=[f0960efb172de28729a2e4e909e97d32]
@startuml
== mnesia:write(K) ==

tx -> a : get write lock(K)
tx -> b : get write lock(K)
tx <- b : ok
tx <- a : ok

== commit transaction ==

tx -> a : ask for commit(TX)
tx -> b : ask for commit(TX)
tx <- b : ok
tx <- a : ok
tx - -> tx : commit
tx -> a : release locks
tx -> b : release locks
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9-Ubuntu-0ubuntu2.20.10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>