<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="589px" preserveAspectRatio="none" style="width:355px;height:589px;" version="1.1" viewBox="0 0 355 589" width="355px" zoomAndPan="magnify"><defs><filter height="300%" id="f3b9uh0udu3nk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="574.0201" style="stroke: #A80036; stroke-width: 1.0;" width="215.5" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="89.75" y="17.897">node a</text><rect fill="#DDDDDD" height="574.0201" style="stroke: #A80036; stroke-width: 1.0;" width="121" x="221.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="260" y="17.897">node b</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="23" x2="23" y1="63.7739" y2="536.9521"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="158.5" x2="158.5" y1="63.7739" y2="536.9521"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="281.5" x2="281.5" y1="63.7739" y2="536.9521"/><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="26" x="8" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="12" x="15" y="47.672">tx</text><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="26" x="8" y="535.9521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="12" x="15" y="557.9181">tx</text><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="102.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="109.5" y="47.672">mnesia_locker</text><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="102.5" y="535.9521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="109.5" y="557.9181">mnesia_locker</text><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="225.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="232.5" y="47.672">mnesia_locker</text><rect fill="#FEFECE" filter="url(#f3b9uh0udu3nk)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="225.5" y="535.9521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="232.5" y="557.9181">mnesia_locker</text><rect fill="#EEEEEE" filter="url(#f3b9uh0udu3nk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="340.5" x="3" y="95.6269"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="343.5" y1="95.6269" y2="95.6269"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="343.5" y1="98.6269" y2="98.6269"/><rect fill="#EEEEEE" filter="url(#f3b9uh0udu3nk)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="121" x="112.75" y="83.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="118.75" y="101.6709">mnesia:write(K)</text><polygon fill="#A80036" points="147,139.186,157,143.186,147,147.186,151,143.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="143.186" y2="143.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="30" y="137.377">get write lock(K)</text><polygon fill="#A80036" points="270,170.892,280,174.892,270,178.892,274,174.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="276" y1="174.892" y2="174.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="30" y="169.083">get write lock(K)</text><polygon fill="#A80036" points="34,202.598,24,206.598,34,210.598,30,206.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="281" y1="206.598" y2="206.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="200.789">ok</text><polygon fill="#A80036" points="34,234.304,24,238.304,34,242.304,30,238.304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="158" y1="238.304" y2="238.304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="232.495">ok</text><rect fill="#EEEEEE" filter="url(#f3b9uh0udu3nk)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="340.5" x="3" y="268.157"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="343.5" y1="268.157" y2="268.157"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="343.5" y1="271.157" y2="271.157"/><rect fill="#EEEEEE" filter="url(#f3b9uh0udu3nk)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="148" x="99.25" y="256.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="105.25" y="274.201">commit transaction</text><polygon fill="#A80036" points="147,311.716,157,315.716,147,319.716,151,315.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="315.716" y2="315.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="30" y="309.907">ask for commit(TX)</text><polygon fill="#A80036" points="270,343.4221,280,347.4221,270,351.4221,274,347.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="276" y1="347.4221" y2="347.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="30" y="341.6131">ask for commit(TX)</text><polygon fill="#A80036" points="34,375.1281,24,379.1281,34,383.1281,30,379.1281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="281" y1="379.1281" y2="379.1281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="373.3191">ok</text><polygon fill="#A80036" points="34,406.8341,24,410.8341,34,414.8341,30,410.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="28" x2="158" y1="410.8341" y2="410.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="40" y="405.0251">ok</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="65" y1="442.5401" y2="442.5401"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="65" x2="65" y1="442.5401" y2="455.5401"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="24" x2="65" y1="455.5401" y2="455.5401"/><polygon fill="#A80036" points="34,451.5401,24,455.5401,34,459.5401,30,455.5401" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="30" y="436.7311">commit</text><polygon fill="#A80036" points="147,483.2461,157,487.2461,147,491.2461,151,487.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="153" y1="487.2461" y2="487.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="481.4371">release locks</text><polygon fill="#A80036" points="270,514.9521,280,518.9521,270,522.9521,274,518.9521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="276" y1="518.9521" y2="518.9521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="513.1431">release locks</text><!--MD5=[f77c29016ff906c5c62ae83d3b78fced]
@startuml
box "node a"
  participant tx
  participant mnesia_locker as a
end box
box "node b"
  participant mnesia_locker as b
end box

== mnesia:write(K) ==

tx -> a : get write lock(K)
tx -> b : get write lock(K)
tx <- b : ok
tx <- a : ok

== commit transaction ==

tx -> a : ask for commit(TX)
tx -> b : ask for commit(TX)
tx <- b : ok
tx <- a : ok
tx - -> tx : commit
tx -> a : release locks
tx -> b : release locks
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9-Ubuntu-0ubuntu2.20.10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>